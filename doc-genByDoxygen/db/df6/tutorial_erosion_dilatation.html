<!-- HTML header for doxygen 1.8.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>OpenCV: Eroding and Dilating</title>
<link href="../../opencv.ico" rel="shortcut icon" type="image/x-icon" />
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js", "TeX/AMSmath.js", "TeX/AMSsymbols.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
MathJax.Hub.Config(
{
  TeX: {
      Macros: {
          matTT: [ "\\[ \\left|\\begin{array}{ccc} #1 & #2 & #3\\\\ #4 & #5 & #6\\\\ #7 & #8 & #9 \\end{array}\\right| \\]", 9],
          fork: ["\\left\\{ \\begin{array}{l l} #1 & \\mbox{#2}\\\\ #3 & \\mbox{#4}\\\\ \\end{array} \\right.", 4],
          forkthree: ["\\left\\{ \\begin{array}{l l} #1 & \\mbox{#2}\\\\ #3 & \\mbox{#4}\\\\ #5 & \\mbox{#6}\\\\ \\end{array} \\right.", 6],
          vecthree: ["\\begin{bmatrix} #1\\\\ #2\\\\ #3 \\end{bmatrix}", 3],
          vecthreethree: ["\\begin{bmatrix} #1 & #2 & #3\\\\ #4 & #5 & #6\\\\ #7 & #8 & #9 \\end{bmatrix}", 9],
          hdotsfor: ["\\dots", 1],
          mathbbm: ["\\mathbb{#1}", 1],
          bordermatrix: ["\\matrix{#1}", 1]
      }
  }
}
);
</script><script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../opencv-logo-small.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">OpenCV
   &#160;<span id="projectnumber">3.0.0-rc1</span>
   </div>
   <div id="projectbrief">Open Source Computer Vision</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
      <li><a href="../../examples.html"><span>Examples</span></a></li>
      <li><a href="../..//3.0-last-rst"><span>Sphinx&#160;Documentation</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../d9/df8/tutorial_root.html">OpenCV Tutorials</a></li><li class="navelem"><a class="el" href="../../d7/da8/tutorial_table_of_content_imgproc.html">Image Processing (imgproc module)</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Eroding and Dilating </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>Goal </h2>
<p>In this tutorial you will learn how to:</p>
<ul>
<li>Apply two very common morphology operators: Dilation and Erosion. For this purpose, you will use the following OpenCV functions:<ul>
<li><a class="el" href="../../d4/d86/group__imgproc__filter.html#gaeb1e0c1033e3f6b891a25d0511362aeb">cv::erode</a></li>
<li><a class="el" href="../../d4/d86/group__imgproc__filter.html#ga4ff0f3318642c4f469d0e11f242f3b6c">cv::dilate</a></li>
</ul>
</li>
</ul>
<h2>Cool Theory </h2>
<dl class="section note"><dt>Note</dt><dd>The explanation below belongs to the book <b>Learning OpenCV</b> by Bradski and Kaehler.</dd></dl>
<h2>Morphological Operations </h2>
<ul>
<li>In short: A set of operations that process images based on shapes. Morphological operations apply a <em>structuring element</em> to an input image and generate an output image.</li>
<li>The most basic morphological operations are two: Erosion and Dilation. They have a wide array of uses, i.e. :<ul>
<li>Removing noise</li>
<li>Isolation of individual elements and joining disparate elements in an image.</li>
<li>Finding of intensity bumps or holes in an image</li>
</ul>
</li>
<li><p class="startli">We will explain dilation and erosion briefly, using the following image as an example:</p>
<div class="image">
<img src="../../Morphology_1_Tutorial_Theory_Original_Image.png" alt="Morphology_1_Tutorial_Theory_Original_Image.png"/>
</div>
</li>
</ul>
<h3>Dilation</h3>
<ul>
<li>This operations consists of convoluting an image \(A\) with some kernel ( \(B\)), which can have any shape or size, usually a square or circle.</li>
<li>The kernel \(B\) has a defined <em>anchor point</em>, usually being the center of the kernel.</li>
<li><p class="startli">As the kernel \(B\) is scanned over the image, we compute the maximal pixel value overlapped by \(B\) and replace the image pixel in the anchor point position with that maximal value. As you can deduce, this maximizing operation causes bright regions within an image to "grow" (therefore the name <em>dilation</em>). Take as an example the image above. Applying dilation we can get:</p>
<div class="image">
<img src="../../Morphology_1_Tutorial_Theory_Dilation.png" alt="Morphology_1_Tutorial_Theory_Dilation.png"/>
</div>
</li>
</ul>
<p>The background (bright) dilates around the black regions of the letter.</p>
<h3>Erosion</h3>
<ul>
<li>This operation is the sister of dilation. What this does is to compute a local minimum over the area of the kernel.</li>
<li>As the kernel \(B\) is scanned over the image, we compute the minimal pixel value overlapped by \(B\) and replace the image pixel under the anchor point with that minimal value.</li>
<li><p class="startli">Analagously to the example for dilation, we can apply the erosion operator to the original image (shown above). You can see in the result below that the bright areas of the image (the background, apparently), get thinner, whereas the dark zones (the "writing") gets bigger.</p>
<div class="image">
<img src="../../Morphology_1_Tutorial_Theory_Erosion.png" alt="Morphology_1_Tutorial_Theory_Erosion.png"/>
</div>
</li>
</ul>
<h2>Code </h2>
<p>This tutorial code's is shown lines below. You can also download it from <a href="https://github.com/Itseez/opencv/tree/master/samples/cpp/tutorial_code/ImgProc/Morphology_1.cpp">here</a> </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d5/dba/imgproc_2imgproc_8hpp.html">opencv2/imgproc/imgproc.hpp</a>&quot;</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d6/d87/imgcodecs_8hpp.html">opencv2/imgcodecs.hpp</a>&quot;</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d0/dce/highgui_2highgui_8hpp.html">opencv2/highgui/highgui.hpp</a>&quot;</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &lt;stdlib.h&gt;</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="keyword">using namespace </span><a class="code" href="../../d2/d75/namespacecv.html">cv</a>;</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<a class="code" href="../../d3/d63/classcv_1_1Mat.html">Mat</a> src, erosion_dst, dilation_dst;</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="keywordtype">int</span> erosion_elem = 0;</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="keywordtype">int</span> erosion_size = 0;</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="keywordtype">int</span> dilation_elem = 0;</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="keywordtype">int</span> dilation_size = 0;</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="keywordtype">int</span> <span class="keyword">const</span> max_elem = 2;</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="keywordtype">int</span> <span class="keyword">const</span> max_kernel_size = 21;</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="keywordtype">void</span> Erosion( <span class="keywordtype">int</span>, <span class="keywordtype">void</span>* );</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="keywordtype">void</span> Dilation( <span class="keywordtype">int</span>, <span class="keywordtype">void</span>* );</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="keywordtype">int</span> main( <span class="keywordtype">int</span>, <span class="keywordtype">char</span>** argv )</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;{</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  src = <a class="code" href="../../d4/da8/group__imgcodecs.html#ga288b8b3da0892bd651fce07b3bbd3a56">imread</a>( argv[1] );</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  <span class="keywordflow">if</span>( src.<a class="code" href="../../d3/d63/classcv_1_1Mat.html#a17d0777aef52a7cfbdb8d04d189fa5c3">empty</a>() )</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    { <span class="keywordflow">return</span> -1; }</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  <a class="code" href="../../d7/dfc/group__highgui.html#ga5afdf8410934fd099df85c75b2e0888b">namedWindow</a>( <span class="stringliteral">&quot;Erosion Demo&quot;</span>, <a class="code" href="../../d7/dfc/group__highgui.html#gga7956af2ace3d3acb9dae27cc96353a42acf621ace7a54954cbac01df27e47228f">WINDOW_AUTOSIZE</a> );</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  <a class="code" href="../../d7/dfc/group__highgui.html#ga5afdf8410934fd099df85c75b2e0888b">namedWindow</a>( <span class="stringliteral">&quot;Dilation Demo&quot;</span>, <a class="code" href="../../d7/dfc/group__highgui.html#gga7956af2ace3d3acb9dae27cc96353a42acf621ace7a54954cbac01df27e47228f">WINDOW_AUTOSIZE</a> );</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  <a class="code" href="../../d7/dfc/group__highgui.html#ga8d86b207f7211250dbe6e28f76307ffb">moveWindow</a>( <span class="stringliteral">&quot;Dilation Demo&quot;</span>, src.<a class="code" href="../../d3/d63/classcv_1_1Mat.html#aa3e5a47585c9ef6a0842556739155e3e">cols</a>, 0 );</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  <a class="code" href="../../d7/dfc/group__highgui.html#gaf78d2155d30b728fc413803745b67a9b">createTrackbar</a>( <span class="stringliteral">&quot;Element:\n 0: Rect \n 1: Cross \n 2: Ellipse&quot;</span>, <span class="stringliteral">&quot;Erosion Demo&quot;</span>,</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;          &amp;erosion_elem, max_elem,</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;          Erosion );</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;  <a class="code" href="../../d7/dfc/group__highgui.html#gaf78d2155d30b728fc413803745b67a9b">createTrackbar</a>( <span class="stringliteral">&quot;Kernel size:\n 2n +1&quot;</span>, <span class="stringliteral">&quot;Erosion Demo&quot;</span>,</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;          &amp;erosion_size, max_kernel_size,</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;          Erosion );</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  <a class="code" href="../../d7/dfc/group__highgui.html#gaf78d2155d30b728fc413803745b67a9b">createTrackbar</a>( <span class="stringliteral">&quot;Element:\n 0: Rect \n 1: Cross \n 2: Ellipse&quot;</span>, <span class="stringliteral">&quot;Dilation Demo&quot;</span>,</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;          &amp;dilation_elem, max_elem,</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;          Dilation );</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  <a class="code" href="../../d7/dfc/group__highgui.html#gaf78d2155d30b728fc413803745b67a9b">createTrackbar</a>( <span class="stringliteral">&quot;Kernel size:\n 2n +1&quot;</span>, <span class="stringliteral">&quot;Dilation Demo&quot;</span>,</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;          &amp;dilation_size, max_kernel_size,</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;          Dilation );</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  Erosion( 0, 0 );</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  Dilation( 0, 0 );</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  <a class="code" href="../../d7/dfc/group__highgui.html#ga5628525ad33f52eab17feebcfba38bd7">waitKey</a>(0);</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;}</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="keywordtype">void</span> Erosion( <span class="keywordtype">int</span>, <span class="keywordtype">void</span>* )</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;{</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <span class="keywordtype">int</span> erosion_type = 0;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  <span class="keywordflow">if</span>( erosion_elem == 0 ){ erosion_type = <a class="code" href="../../d4/d86/group__imgproc__filter.html#ggac2db39b56866583a95a5680313c314ada260c4cbde19a749726763c01a074c60f">MORPH_RECT</a>; }</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span>( erosion_elem == 1 ){ erosion_type = <a class="code" href="../../d4/d86/group__imgproc__filter.html#ggac2db39b56866583a95a5680313c314ada318435753d0b9f7faa241a658ec2e191">MORPH_CROSS</a>; }</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span>( erosion_elem == 2) { erosion_type = <a class="code" href="../../d4/d86/group__imgproc__filter.html#ggac2db39b56866583a95a5680313c314ada33a3c67a61f349d21c507d05c53a755f">MORPH_ELLIPSE</a>; }</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  <a class="code" href="../../d3/d63/classcv_1_1Mat.html">Mat</a> element = <a class="code" href="../../d4/d86/group__imgproc__filter.html#gac342a1bb6eabf6f55c803b09268e36dc">getStructuringElement</a>( erosion_type,</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;                       <a class="code" href="../../dc/d84/group__core__basic.html#ga346f563897249351a34549137c8532a0">Size</a>( 2*erosion_size + 1, 2*erosion_size+1 ),</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;                       <a class="code" href="../../dc/d84/group__core__basic.html#ga1e83eafb2d26b3c93f09e8338bcab192">Point</a>( erosion_size, erosion_size ) );</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <a class="code" href="../../d4/d86/group__imgproc__filter.html#gaeb1e0c1033e3f6b891a25d0511362aeb">erode</a>( src, erosion_dst, element );</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  <a class="code" href="../../d7/dfc/group__highgui.html#ga453d42fe4cb60e5723281a89973ee563">imshow</a>( <span class="stringliteral">&quot;Erosion Demo&quot;</span>, erosion_dst );</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;}</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="keywordtype">void</span> Dilation( <span class="keywordtype">int</span>, <span class="keywordtype">void</span>* )</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;{</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  <span class="keywordtype">int</span> dilation_type = 0;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  <span class="keywordflow">if</span>( dilation_elem == 0 ){ dilation_type = <a class="code" href="../../d4/d86/group__imgproc__filter.html#ggac2db39b56866583a95a5680313c314ada260c4cbde19a749726763c01a074c60f">MORPH_RECT</a>; }</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span>( dilation_elem == 1 ){ dilation_type = <a class="code" href="../../d4/d86/group__imgproc__filter.html#ggac2db39b56866583a95a5680313c314ada318435753d0b9f7faa241a658ec2e191">MORPH_CROSS</a>; }</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span>( dilation_elem == 2) { dilation_type = <a class="code" href="../../d4/d86/group__imgproc__filter.html#ggac2db39b56866583a95a5680313c314ada33a3c67a61f349d21c507d05c53a755f">MORPH_ELLIPSE</a>; }</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <a class="code" href="../../d3/d63/classcv_1_1Mat.html">Mat</a> element = <a class="code" href="../../d4/d86/group__imgproc__filter.html#gac342a1bb6eabf6f55c803b09268e36dc">getStructuringElement</a>( dilation_type,</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;                       <a class="code" href="../../dc/d84/group__core__basic.html#ga346f563897249351a34549137c8532a0">Size</a>( 2*dilation_size + 1, 2*dilation_size+1 ),</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;                       <a class="code" href="../../dc/d84/group__core__basic.html#ga1e83eafb2d26b3c93f09e8338bcab192">Point</a>( dilation_size, dilation_size ) );</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  <a class="code" href="../../d4/d86/group__imgproc__filter.html#ga4ff0f3318642c4f469d0e11f242f3b6c">dilate</a>( src, dilation_dst, element );</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  <a class="code" href="../../d7/dfc/group__highgui.html#ga453d42fe4cb60e5723281a89973ee563">imshow</a>( <span class="stringliteral">&quot;Dilation Demo&quot;</span>, dilation_dst );</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;}</div>
<div class="ttc" id="classcv_1_1Mat_html_a17d0777aef52a7cfbdb8d04d189fa5c3"><div class="ttname"><a href="../../d3/d63/classcv_1_1Mat.html#a17d0777aef52a7cfbdb8d04d189fa5c3">cv::Mat::empty</a></div><div class="ttdeci">bool empty() const </div><div class="ttdoc">Returns true if the array has no elements. </div></div>
<div class="ttc" id="group__imgproc__filter_html_gac342a1bb6eabf6f55c803b09268e36dc"><div class="ttname"><a href="../../d4/d86/group__imgproc__filter.html#gac342a1bb6eabf6f55c803b09268e36dc">cv::getStructuringElement</a></div><div class="ttdeci">Mat getStructuringElement(int shape, Size ksize, Point anchor=Point(-1,-1))</div><div class="ttdoc">Returns a structuring element of the specified size and shape for morphological operations. </div></div>
<div class="ttc" id="group__imgproc__filter_html_ggac2db39b56866583a95a5680313c314ada318435753d0b9f7faa241a658ec2e191"><div class="ttname"><a href="../../d4/d86/group__imgproc__filter.html#ggac2db39b56866583a95a5680313c314ada318435753d0b9f7faa241a658ec2e191">cv::MORPH_CROSS</a></div><div class="ttdef"><b>Definition:</b> imgproc.hpp:235</div></div>
<div class="ttc" id="highgui_2highgui_8hpp_html"><div class="ttname"><a href="../../d0/dce/highgui_2highgui_8hpp.html">highgui.hpp</a></div></div>
<div class="ttc" id="group__imgcodecs_html_ga288b8b3da0892bd651fce07b3bbd3a56"><div class="ttname"><a href="../../d4/da8/group__imgcodecs.html#ga288b8b3da0892bd651fce07b3bbd3a56">cv::imread</a></div><div class="ttdeci">Mat imread(const String &amp;filename, int flags=IMREAD_COLOR)</div><div class="ttdoc">Loads an image from a file. </div></div>
<div class="ttc" id="group__imgproc__filter_html_gaeb1e0c1033e3f6b891a25d0511362aeb"><div class="ttname"><a href="../../d4/d86/group__imgproc__filter.html#gaeb1e0c1033e3f6b891a25d0511362aeb">cv::erode</a></div><div class="ttdeci">void erode(InputArray src, OutputArray dst, InputArray kernel, Point anchor=Point(-1,-1), int iterations=1, int borderType=BORDER_CONSTANT, const Scalar &amp;borderValue=morphologyDefaultBorderValue())</div><div class="ttdoc">Erodes an image by using a specific structuring element. </div></div>
<div class="ttc" id="group__highgui_html_ga453d42fe4cb60e5723281a89973ee563"><div class="ttname"><a href="../../d7/dfc/group__highgui.html#ga453d42fe4cb60e5723281a89973ee563">cv::imshow</a></div><div class="ttdeci">void imshow(const String &amp;winname, InputArray mat)</div><div class="ttdoc">Displays an image in the specified window. </div></div>
<div class="ttc" id="namespacecv_html"><div class="ttname"><a href="../../d2/d75/namespacecv.html">cv</a></div><div class="ttdef"><b>Definition:</b> affine.hpp:51</div></div>
<div class="ttc" id="imgcodecs_8hpp_html"><div class="ttname"><a href="../../d6/d87/imgcodecs_8hpp.html">imgcodecs.hpp</a></div></div>
<div class="ttc" id="group__highgui_html_gaf78d2155d30b728fc413803745b67a9b"><div class="ttname"><a href="../../d7/dfc/group__highgui.html#gaf78d2155d30b728fc413803745b67a9b">cv::createTrackbar</a></div><div class="ttdeci">int createTrackbar(const String &amp;trackbarname, const String &amp;winname, int *value, int count, TrackbarCallback onChange=0, void *userdata=0)</div><div class="ttdoc">Creates a trackbar and attaches it to the specified window. </div></div>
<div class="ttc" id="group__imgproc__filter_html_ga4ff0f3318642c4f469d0e11f242f3b6c"><div class="ttname"><a href="../../d4/d86/group__imgproc__filter.html#ga4ff0f3318642c4f469d0e11f242f3b6c">cv::dilate</a></div><div class="ttdeci">void dilate(InputArray src, OutputArray dst, InputArray kernel, Point anchor=Point(-1,-1), int iterations=1, int borderType=BORDER_CONSTANT, const Scalar &amp;borderValue=morphologyDefaultBorderValue())</div><div class="ttdoc">Dilates an image by using a specific structuring element. </div></div>
<div class="ttc" id="classcv_1_1Mat_html_aa3e5a47585c9ef6a0842556739155e3e"><div class="ttname"><a href="../../d3/d63/classcv_1_1Mat.html#aa3e5a47585c9ef6a0842556739155e3e">cv::Mat::cols</a></div><div class="ttdeci">int cols</div><div class="ttdef"><b>Definition:</b> mat.hpp:1865</div></div>
<div class="ttc" id="imgproc_2imgproc_8hpp_html"><div class="ttname"><a href="../../d5/dba/imgproc_2imgproc_8hpp.html">imgproc.hpp</a></div></div>
<div class="ttc" id="group__highgui_html_ga5afdf8410934fd099df85c75b2e0888b"><div class="ttname"><a href="../../d7/dfc/group__highgui.html#ga5afdf8410934fd099df85c75b2e0888b">cv::namedWindow</a></div><div class="ttdeci">void namedWindow(const String &amp;winname, int flags=WINDOW_AUTOSIZE)</div><div class="ttdoc">Creates a window. </div></div>
<div class="ttc" id="group__core__basic_html_ga346f563897249351a34549137c8532a0"><div class="ttname"><a href="../../dc/d84/group__core__basic.html#ga346f563897249351a34549137c8532a0">cv::Size</a></div><div class="ttdeci">Size2i Size</div><div class="ttdef"><b>Definition:</b> types.hpp:308</div></div>
<div class="ttc" id="group__imgproc__filter_html_ggac2db39b56866583a95a5680313c314ada260c4cbde19a749726763c01a074c60f"><div class="ttname"><a href="../../d4/d86/group__imgproc__filter.html#ggac2db39b56866583a95a5680313c314ada260c4cbde19a749726763c01a074c60f">cv::MORPH_RECT</a></div><div class="ttdoc">a rectangular structuring element:  </div><div class="ttdef"><b>Definition:</b> imgproc.hpp:234</div></div>
<div class="ttc" id="group__highgui_html_gga7956af2ace3d3acb9dae27cc96353a42acf621ace7a54954cbac01df27e47228f"><div class="ttname"><a href="../../d7/dfc/group__highgui.html#gga7956af2ace3d3acb9dae27cc96353a42acf621ace7a54954cbac01df27e47228f">cv::WINDOW_AUTOSIZE</a></div><div class="ttdef"><b>Definition:</b> highgui.hpp:138</div></div>
<div class="ttc" id="group__highgui_html_ga8d86b207f7211250dbe6e28f76307ffb"><div class="ttname"><a href="../../d7/dfc/group__highgui.html#ga8d86b207f7211250dbe6e28f76307ffb">cv::moveWindow</a></div><div class="ttdeci">void moveWindow(const String &amp;winname, int x, int y)</div><div class="ttdoc">Moves window to the specified position. </div></div>
<div class="ttc" id="group__imgproc__filter_html_ggac2db39b56866583a95a5680313c314ada33a3c67a61f349d21c507d05c53a755f"><div class="ttname"><a href="../../d4/d86/group__imgproc__filter.html#ggac2db39b56866583a95a5680313c314ada33a3c67a61f349d21c507d05c53a755f">cv::MORPH_ELLIPSE</a></div><div class="ttdef"><b>Definition:</b> imgproc.hpp:237</div></div>
<div class="ttc" id="classcv_1_1Mat_html"><div class="ttname"><a href="../../d3/d63/classcv_1_1Mat.html">cv::Mat</a></div><div class="ttdoc">n-dimensional dense array class </div><div class="ttdef"><b>Definition:</b> mat.hpp:726</div></div>
<div class="ttc" id="group__core__basic_html_ga1e83eafb2d26b3c93f09e8338bcab192"><div class="ttname"><a href="../../dc/d84/group__core__basic.html#ga1e83eafb2d26b3c93f09e8338bcab192">cv::Point</a></div><div class="ttdeci">Point2i Point</div><div class="ttdef"><b>Definition:</b> types.hpp:181</div></div>
<div class="ttc" id="group__highgui_html_ga5628525ad33f52eab17feebcfba38bd7"><div class="ttname"><a href="../../d7/dfc/group__highgui.html#ga5628525ad33f52eab17feebcfba38bd7">cv::waitKey</a></div><div class="ttdeci">int waitKey(int delay=0)</div><div class="ttdoc">Waits for a pressed key. </div></div>
</div><!-- fragment --><h2>Explanation </h2>
<ol type="1">
<li><p class="startli">Most of the stuff shown is known by you (if you have any doubt, please refer to the tutorials in previous sections). Let's check the general structure of the program:</p><ul>
<li>Load an image (can be RGB or grayscale)</li>
<li>Create two windows (one for dilation output, the other for erosion)</li>
<li>Create a set of 02 Trackbars for each operation:<ul>
<li>The first trackbar "Element" returns either <b>erosion_elem</b> or <b>dilation_elem</b></li>
<li>The second trackbar "Kernel size" return <b>erosion_size</b> or <b>dilation_size</b> for the corresponding operation.</li>
</ul>
</li>
<li>Every time we move any slider, the user's function <b>Erosion</b> or <b>Dilation</b> will be called and it will update the output image based on the current trackbar values.</li>
</ul>
<p class="startli">Let's analyze these two functions:</p>
</li>
<li><b>erosion:</b> <div class="fragment"><div class="line"><span class="comment">/*  @function Erosion  */</span></div>
<div class="line"><span class="keywordtype">void</span> Erosion( <span class="keywordtype">int</span>, <span class="keywordtype">void</span>* )</div>
<div class="line">{</div>
<div class="line">  <span class="keywordtype">int</span> erosion_type;</div>
<div class="line">  <span class="keywordflow">if</span>( erosion_elem == 0 ){ erosion_type = <a class="code" href="../../d4/d86/group__imgproc__filter.html#ggac2db39b56866583a95a5680313c314ada260c4cbde19a749726763c01a074c60f">MORPH_RECT</a>; }</div>
<div class="line">  <span class="keywordflow">else</span> <span class="keywordflow">if</span>( erosion_elem == 1 ){ erosion_type = <a class="code" href="../../d4/d86/group__imgproc__filter.html#ggac2db39b56866583a95a5680313c314ada318435753d0b9f7faa241a658ec2e191">MORPH_CROSS</a>; }</div>
<div class="line">  <span class="keywordflow">else</span> <span class="keywordflow">if</span>( erosion_elem == 2) { erosion_type = <a class="code" href="../../d4/d86/group__imgproc__filter.html#ggac2db39b56866583a95a5680313c314ada33a3c67a61f349d21c507d05c53a755f">MORPH_ELLIPSE</a>; }</div>
<div class="line"></div>
<div class="line">  Mat element = <a class="code" href="../../d4/d86/group__imgproc__filter.html#gac342a1bb6eabf6f55c803b09268e36dc">getStructuringElement</a>( erosion_type,</div>
<div class="line">                           <a class="code" href="../../dc/d84/group__core__basic.html#ga346f563897249351a34549137c8532a0">Size</a>( 2*erosion_size + 1, 2*erosion_size+1 ),</div>
<div class="line">                       <a class="code" href="../../dc/d84/group__core__basic.html#ga1e83eafb2d26b3c93f09e8338bcab192">Point</a>( erosion_size, erosion_size ) );</div>
<div class="line">  <a class="code" href="../../d4/d86/group__imgproc__filter.html#gaeb1e0c1033e3f6b891a25d0511362aeb">erode</a>( src, erosion_dst, element );</div>
<div class="line">  <a class="code" href="../../d7/dfc/group__highgui.html#ga453d42fe4cb60e5723281a89973ee563">imshow</a>( <span class="stringliteral">&quot;Erosion Demo&quot;</span>, erosion_dst );</div>
<div class="line">}</div>
</div><!-- fragment --><ul>
<li>The function that performs the <em>erosion</em> operation is <a class="el" href="../../d4/d86/group__imgproc__filter.html#gaeb1e0c1033e3f6b891a25d0511362aeb">cv::erode</a> . As we can see, it receives three arguments:<ul>
<li><em>src</em>: The source image</li>
<li><em>erosion_dst</em>: The output image</li>
<li><p class="startli"><em>element</em>: This is the kernel we will use to perform the operation. If we do not specify, the default is a simple <code>3x3</code> matrix. Otherwise, we can specify its shape. For this, we need to use the function <a class="el" href="../../d4/d86/group__imgproc__filter.html#gac342a1bb6eabf6f55c803b09268e36dc" title="Returns a structuring element of the specified size and shape for morphological operations. ">cv::getStructuringElement</a> : </p><div class="fragment"><div class="line">Mat element = <a class="code" href="../../d4/d86/group__imgproc__filter.html#gac342a1bb6eabf6f55c803b09268e36dc">getStructuringElement</a>( erosion_type,</div>
<div class="line">                              <a class="code" href="../../dc/d84/group__core__basic.html#ga346f563897249351a34549137c8532a0">Size</a>( 2*erosion_size + 1, 2*erosion_size+1 ),</div>
<div class="line">                              <a class="code" href="../../dc/d84/group__core__basic.html#ga1e83eafb2d26b3c93f09e8338bcab192">Point</a>( erosion_size, erosion_size ) );</div>
</div><!-- fragment --><p> We can choose any of three shapes for our kernel:</p><ul>
<li>Rectangular box: MORPH_RECT</li>
<li>Cross: MORPH_CROSS</li>
<li>Ellipse: MORPH_ELLIPSE</li>
</ul>
<p class="startli">Then, we just have to specify the size of our kernel and the <em>anchor point</em>. If not specified, it is assumed to be in the center.</p>
</li>
</ul>
</li>
<li>That is all. We are ready to perform the erosion of our image. <dl class="section note"><dt>Note</dt><dd>Additionally, there is another parameter that allows you to perform multiple erosions (iterations) at once. We are not using it in this simple tutorial, though. You can check out the Reference for more details.</dd></dl>
</li>
</ul>
</li>
<li><p class="startli"><b>dilation:</b></p>
<p class="startli">The code is below. As you can see, it is completely similar to the snippet of code for <b>erosion</b>. Here we also have the option of defining our kernel, its anchor point and the size of the operator to be used. </p><div class="fragment"><div class="line"><span class="comment">/* @function Dilation */</span></div>
<div class="line"><span class="keywordtype">void</span> Dilation( <span class="keywordtype">int</span>, <span class="keywordtype">void</span>* )</div>
<div class="line">{</div>
<div class="line">  <span class="keywordtype">int</span> dilation_type;</div>
<div class="line">  <span class="keywordflow">if</span>( dilation_elem == 0 ){ dilation_type = <a class="code" href="../../d4/d86/group__imgproc__filter.html#ggac2db39b56866583a95a5680313c314ada260c4cbde19a749726763c01a074c60f">MORPH_RECT</a>; }</div>
<div class="line">  <span class="keywordflow">else</span> <span class="keywordflow">if</span>( dilation_elem == 1 ){ dilation_type = <a class="code" href="../../d4/d86/group__imgproc__filter.html#ggac2db39b56866583a95a5680313c314ada318435753d0b9f7faa241a658ec2e191">MORPH_CROSS</a>; }</div>
<div class="line">  <span class="keywordflow">else</span> <span class="keywordflow">if</span>( dilation_elem == 2) { dilation_type = <a class="code" href="../../d4/d86/group__imgproc__filter.html#ggac2db39b56866583a95a5680313c314ada33a3c67a61f349d21c507d05c53a755f">MORPH_ELLIPSE</a>; }</div>
<div class="line"></div>
<div class="line">  Mat element = <a class="code" href="../../d4/d86/group__imgproc__filter.html#gac342a1bb6eabf6f55c803b09268e36dc">getStructuringElement</a>( dilation_type,</div>
<div class="line">                                       <a class="code" href="../../dc/d84/group__core__basic.html#ga346f563897249351a34549137c8532a0">Size</a>( 2*dilation_size + 1, 2*dilation_size+1 ),</div>
<div class="line">                       <a class="code" href="../../dc/d84/group__core__basic.html#ga1e83eafb2d26b3c93f09e8338bcab192">Point</a>( dilation_size, dilation_size ) );</div>
<div class="line">  <a class="code" href="../../d4/d86/group__imgproc__filter.html#ga4ff0f3318642c4f469d0e11f242f3b6c">dilate</a>( src, dilation_dst, element );</div>
<div class="line">  <a class="code" href="../../d7/dfc/group__highgui.html#ga453d42fe4cb60e5723281a89973ee563">imshow</a>( <span class="stringliteral">&quot;Dilation Demo&quot;</span>, dilation_dst );</div>
<div class="line">}</div>
</div><!-- fragment --></li>
</ol>
<h2>Results </h2>
<p>Compile the code above and execute it with an image as argument. For instance, using this image:</p>
<div class="image">
<img src="../../Morphology_1_Tutorial_Original_Image.jpg" alt="Morphology_1_Tutorial_Original_Image.jpg"/>
</div>
<p>We get the results below. Varying the indices in the Trackbars give different output images, naturally. Try them out! You can even try to add a third Trackbar to control the number of iterations.</p>
<div class="image">
<img src="../../Morphology_1_Result.jpg" alt="Morphology_1_Result.jpg"/>
</div>
 </div></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.6-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat May 16 2015 15:12:51 for OpenCV by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
